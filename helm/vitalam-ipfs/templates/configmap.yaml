apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "vitalam-ipfs.fullname" . }}-config
  labels:
    {{- include "vitalam-ipfs.labels" . | nindent 4 }}
data:
  healthCheckPort: {{ .Values.config.healthCheckPort | quote }}
  logLevel: {{ .Values.config.logLevel }}
  {{- if .Values.config.nodeHost }}
  nodeHost: {{ .Values.config.nodeHost }}
  {{- else if .Values.vitalamNode.enabled }}
  nodeHost: {{ template "vitalam-node.fullname" .Subcharts.vitalamNode }}
  {{- end }}
  {{- if .Values.config.nodePort }}
  nodePort: {{ .Values.config.nodePort }}
  {{- end }}
  ipfsCommand: {{ .Values.config.ipfsCommand }}
  ipfsLogLevel: {{ .Values.config.ipfsLogLevel }}
  ipfsArgs: {{ .Values.config.ipfsArgs | toJson | quote }}
  {{- if .Values.config.ipfsBootNodeAddress }}
  ipfsBootNodeAddress: {{ .Values.config.ipfsBootNodeAddress }}
  {{- end }}
  ipfsApiPort: {{ .Values.config.ipfsApiPort | quote }}
  ipfsSwarmPort: {{ .Values.config.ipfsSwarmPort | quote }}
  dataVolumeSize: {{ .Values.storage.dataVolumeSize | quote }}
